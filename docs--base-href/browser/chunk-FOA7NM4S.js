import{a as E}from"./chunk-2I6GPQOV.js";import{a as F,b as l,c as V,d as P,e as h,f as c,h as L,i as T,j as G,n as N}from"./chunk-KGRFRDJE.js";import{g as S}from"./chunk-25Q7XG66.js";import"./chunk-TEMWAYY4.js";import"./chunk-QPXOLKJM.js";import{Ab as w,Bb as g,Ib as s,Pb as k,Ra as d,Y as v,ba as C,hb as y,jb as m,la as f,ma as p,nb as x,rb as a,sb as i,tb as u,wb as b}from"./chunk-JVHKVP6Q.js";import"./chunk-YHOLSLLF.js";function A(r,n){r&1&&(a(0,"span"),u(1,"i",8),i())}function D(r,n){if(r&1){let e=b();a(0,"form",3),w("ngSubmit",function(){f(e);let o=g();return p(o.verifyEmailSubmit())}),a(1,"div",4)(2,"label",5),s(3,"email"),i(),u(4,"input",6),i(),a(5,"button",7),s(6," verify email "),y(7,A,2,0,"span"),i()()}if(r&2){let e=g();m("formGroup",e.verifyEmail),d(5),m("disabled",e.verifyEmail.invalid||e.isLoading),d(2),x(7,e.isLoading?7:-1)}}function q(r,n){r&1&&(a(0,"span"),u(1,"i",8),i())}function M(r,n){if(r&1){let e=b();a(0,"form",9),w("ngSubmit",function(){f(e);let o=g();return p(o.sentCode())}),a(1,"div",4)(2,"label",10),s(3,"code"),i(),u(4,"input",11),i(),a(5,"button",7),s(6," sent Code "),y(7,q,2,0,"span"),i()()}if(r&2){let e=g();m("formGroup",e.verifycode),d(5),m("disabled",e.verifycode.invalid),d(2),x(7,e.isLoading?7:-1)}}function R(r,n){if(r&1){let e=b();a(0,"form",3),w("ngSubmit",function(){f(e);let o=g();return p(o.resetPasswordSubmit())}),a(1,"div",4)(2,"label",5),s(3,"email"),i(),u(4,"input",12),i(),a(5,"div",4)(6,"label",13),s(7,"password"),i(),u(8,"input",14),i(),a(9,"button",7),s(10," confirm reset password "),i()()}if(r&2){let e=g();m("formGroup",e.resetPassword),d(9),m("disabled",e.resetPassword.invalid)}}var J=(()=>{let n=class n{constructor(){this.isLoading=!1,this.step=1,this._AuthService=v(E),this._Router=v(S),this.verifyEmail=new h({email:new c(null,[l.required,l.email])}),this.verifycode=new h({resetCode:new c(null,[l.required,l.pattern(/^\w{6}$/)])}),this.resetPassword=new h({email:new c(null,[l.required,l.email]),password:new c(null,[l.required])})}verifyEmailSubmit(){let t=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(t),this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:o=>{this.isLoading=!1,o.statusMsg==="success"?this.step=2:console.error("Failed to verify email:",o.message)},error:o=>{this.isLoading=!1,console.error("Error verifying email:",o)}})}sentCode(){this._AuthService.setCodeVerify(this.verifycode.value).subscribe({next:t=>{this.isLoading=!1,t.status==="Success"?this.step=3:console.error("Failed to verify code:",t.message)},error:t=>{this.isLoading=!1,console.error("Error verifying code:",t)}})}resetPasswordSubmit(){this._AuthService.resetPasswordVerify(this.resetPassword.value).subscribe({next:t=>{this.isLoading=!1,t.status==="Success"?(localStorage.setItem("userToken",t.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])):console.error("Failed to reset password:",t.message)},error:t=>{this.isLoading=!1,console.error("Error resetting password:",t)}})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=C({type:n,selectors:[["app-forgot-password"]],standalone:!0,features:[k],decls:6,vars:1,consts:[[1,"my-5"],[1,"text-main","text-4xl","text-center","my-3"],[1,"rounded-lg","bg-main-light","shadow-lg","mx-auto","p-10","container","w-[80%]",3,"formGroup"],[1,"rounded-lg","bg-main-light","shadow-lg","mx-auto","p-10","container","w-[80%]",3,"ngSubmit","formGroup"],[1,"my-5","container"],["for","email",1,"block","text-main","text-xl","mb-2","font-medium","text-gray-900","dark:text-white"],["formControlName","email","id","email","type","email",1,"bg-gray-50","border","border-gray-300","shadow-md","text-gray-900","text-main","text-xl","rounded-lg","focus:ring-gray-500","focus:border-gray-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-gray-500","dark:focus:border-gray-500"],[1,"btn-main","mx-auto","block","w-full","capitalize",3,"disabled"],[1,"fas","fa-spin","fa-spinner"],[1,"rounded-lg","bg-main-light","shadow-lg","mx-auto","p-10","my-5","container","w-[80%]",3,"ngSubmit","formGroup"],["for","resetCode",1,"block","text-main","text-xl","mb-2","font-medium","text-gray-900","dark:text-white"],["formControlName","resetCode","id","resetCode","type","text",1,"bg-gray-50","border","border-gray-300","shadow-md","text-gray-900","text-main","text-xl","rounded-lg","focus:ring-gray-500","focus:border-gray-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-gray-500","dark:focus:border-gray-500"],["readonly","","formControlName","email","id","email","type","email",1,"bg-gray-50","border","border-gray-300","shadow-md","text-gray-900","text-main","text-xl","rounded-lg","focus:ring-gray-500","focus:border-gray-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-gray-500","dark:focus:border-gray-500"],["for","password",1,"block","text-main","text-xl","mb-2","font-medium","text-gray-900","dark:text-white"],["formControlName","password","id","password","type","password",1,"bg-gray-50","border","border-gray-300","shadow-md","text-gray-900","text-main","text-xl","rounded-lg","focus:ring-gray-500","focus:border-gray-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-gray-500","dark:focus:border-gray-500"]],template:function(o,_){o&1&&(a(0,"section",0)(1,"h1",1),s(2,"Forgot password"),i(),y(3,D,8,3,"form",2)(4,M,8,3)(5,R,11,2),i()),o&2&&(d(3),x(3,_.step==1?3:_.step==2?4:_.step==3?5:-1))},dependencies:[N,L,F,V,P,T,G]});let r=n;return r})();export{J as ForgotPasswordComponent};
