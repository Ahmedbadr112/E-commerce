import{l as w}from"./chunk-ZRMB4MTA.js";import{a as C,b as d,c as F,d as I,e as E,f as c,h as N,i as _,j as A,n as R}from"./chunk-HZTAGDPS.js";import{k,s as y,u as v,z as S}from"./chunk-NRSPPHHT.js";import{Hb as a,Ob as x,Ra as f,S as u,X as g,Y as s,ba as p,jb as h,qb as n,rb as r,sb as l,zb as b}from"./chunk-Y3K4MGWQ.js";import"./chunk-YHOLSLLF.js";var T=(()=>{let t=class t{constructor(e){this._HttpClient=e,this.headers={token:localStorage.getItem("userToken")}}checkout(e,o){return this._HttpClient.post(`${S.baseUrl}/api/v1/orders/checkout-session/${e}?url=http://localhost:4200/FreshCart`,{shippingAddress:o})}};t.\u0275fac=function(o){return new(o||t)(g(k))},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var B=(()=>{let t=class t{constructor(){this.cartId="",this._ActivatedRoute=s(y),this._OrderService=s(T),this._Router=s(v),this._Toaster=s(w),this.orders=new E({details:new c(null,[d.required]),phone:new c(null,[d.required,d.pattern(/^01[0125][0-9]{8}$/)]),city:new c(null,[d.required])})}orderSubmit(){console.log(this.orders.value),this._OrderService.checkout(this.cartId,this.orders.value).subscribe({next:e=>{console.log(e),e.status==="success"&&(this._Toaster.success("checkout completed successfully"),window.open(e.session.url))},error:e=>{console.log(e)}})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{this.cartId=e.get("id"),console.log(this.cartId)},error:e=>{console.log(e)}})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=p({type:t,selectors:[["app-orders"]],standalone:!0,features:[x],decls:18,vars:1,consts:[[1,"bg-main-light","p-10","rounded","w-5/6","container","my-5","shadow-lg","mx-auto"],[1,"text-main","text-2xl","text-center"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"my-2"],["for","details"],["formControlName","details","id","details","type","text",1,"bg-gray-50","border","w-full","border-gray-300","shadow-md","text-green-900","text-main","text-xl","rounded-lg","focus:ring-green-500","focus:border-green-500","block","p-2.5","dark:bg-green-700","dark:border-green-600","dark:placeholder-green-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"],["for","city"],["formControlName","city","id","city","type","text",1,"bg-gray-50","border","w-full","border-gray-300","shadow-md","text-green-900","text-main","text-xl","rounded-lg","focus:ring-green-500","focus:border-green-500","block","p-2.5","dark:bg-green-700","dark:border-green-600","dark:placeholder-green-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"],["for","phone"],["formControlName","phone","id","phone","type","tel",1,"bg-gray-50","border","w-full","border-gray-300","shadow-md","text-green-900","text-main","text-xl","rounded-lg","focus:ring-green-500","focus:border-green-500","block","p-2.5","dark:bg-green-700","dark:border-green-600","dark:placeholder-green-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"],[1,"btn-main","my-5","capitalize"]],template:function(o,m){o&1&&(n(0,"section",0)(1,"h1",1),a(2,"shipping Adaress"),r(),n(3,"form",2),b("ngSubmit",function(){return m.orderSubmit()}),n(4,"div",3)(5,"label",4),a(6,"Details"),r(),l(7,"input",5),r(),n(8,"div",3)(9,"label",6),a(10,"City"),r(),l(11,"input",7),r(),n(12,"div",3)(13,"label",8),a(14,"Phone"),r(),l(15,"input",9),r(),n(16,"button",10),a(17,"check out"),r()()()),o&2&&(f(3),h("formGroup",m.orders))},dependencies:[R,N,C,F,I,_,A]});let i=t;return i})();export{B as OrdersComponent};
